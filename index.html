<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Films TMDb - Recherche et Cat√©gories</title>
<style>
 /* RESET & BASE */
* {
  box-sizing: border-box;
}

body {
  margin: 0;
  padding: 20px;
  font-family: 'Segoe UI', Roboto, Arial, sans-serif;
  background: linear-gradient(135deg, #0d253f, #081a2f);
  color: #ffffff;
}

/* TITRE */
h1 {
  text-align: center;
  font-size: 2.4rem;
  margin-bottom: 25px;
  letter-spacing: 1px;
  color: #01b4e4;
}

/* FORMULAIRE */
form {
  display: flex;
  justify-content: center;
  gap: 10px;
  margin-bottom: 25px;
  flex-wrap: wrap;
}

input[type="text"] {
  width: 280px;
  max-width: 100%;
  padding: 12px 15px;
  border-radius: 25px;
  border: none;
  outline: none;
  font-size: 1rem;
}

button {
  padding: 12px 18px;
  border-radius: 25px;
  border: none;
  background: linear-gradient(135deg, #01b4e4, #00e0ff);
  color: #fff;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.25s ease;
  box-shadow: 0 4px 10px rgba(1, 180, 228, 0.3);
}

button:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 15px rgba(1, 180, 228, 0.5);
}

/* CATEGORIES */
.categories {
  display: flex;
  justify-content: center;
  flex-wrap: wrap;
  gap: 10px;
  margin-bottom: 30px;
}

/* RESULTATS */
.results {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
  gap: 25px;
}

/* CARTE FILM / ARTISTE */
.movie {
  background: linear-gradient(180deg, #1e3a5f, #162b46);
  border-radius: 16px;
  padding: 12px;
  text-align: center;
  transition: all 0.3s ease;
  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.35);
  overflow: hidden;
  position: relative;
}

.movie::before {
  content: "";
  position: absolute;
  inset: 0;
  background: linear-gradient(180deg, transparent, rgba(0,0,0,0.6));
  opacity: 0;
  transition: opacity 0.3s ease;
}

.movie:hover::before {
  opacity: 1;
}

.movie:hover {
  transform: translateY(-8px) scale(1.03);
}

/* IMAGE */
.movie img {
  width: 100%;
  border-radius: 12px;
  margin-bottom: 10px;
  object-fit: cover;
}

/* TITRE FILM */
.movie h3 {
  font-size: 1.1rem;
  margin: 8px 0;
  color: #ffffff;
}

/* TEXTE */
.movie p {
  margin: 4px 0;
  font-size: 0.9rem;
  color: #cfd8dc;
}

/* DESCRIPTION */
.overview {
  font-size: 0.85rem;
  color: #e0e0e0;
  margin-top: 8px;
  text-align: justify;
  line-height: 1.4;
  max-height: 110px;
  overflow: hidden;
}

/* LISTE ARTISTES */
.movie ul {
  list-style: none;
  padding: 0;
  margin: 8px 0 0;
  font-size: 0.85rem;
}

.movie ul li {
  color: #b0e9ff;
}

/* RESPONSIVE */
@media (max-width: 600px) {
  h1 {
    font-size: 1.9rem;
  }

  input[type="text"] {
    width: 100%;
  }
}

</style>
</head>
<body>

<h1>Films üé¨ TMDb</h1>

<form id="searchForm">
  <input type="text" id="searchInput" placeholder="Rechercher un film...">
  <button type="submit">Rechercher</button>
</form>

<div class="categories">
  <button onclick="getPopular()">Films populaires</button>
  <button onclick="getByGenre(27)">Horreur</button>
  <button onclick="getByGenre(28)">Action</button>
  <button onclick="getByGenre(35)">Com√©die</button>
  <button onclick="getByGenre(18)">Drame</button>
  <button onclick="getByGenre(10749)">Romance</button>
  <button onclick="getByGenre(878)">Science-Fiction</button>
  <button onclick="getByGenre(16)">Animation</button>
  <button onclick="getArtistes(200)">Artiste populaire</button>
  <button onclick="getByGenre(99)">Documentaire</button>
</div>

<div class="results" id="results"></div>


<script>
const apiKey = "dbad40cbbe33db97f360d55b675242db"; // ta cl√© API

document.getElementById('searchForm').addEventListener('submit', function(e){
  e.preventDefault();
  const query = document.getElementById('searchInput').value.trim();
  if(query) searchMovies(query);
});
function displayArtists(artists){
  const resDiv = document.getElementById('results');
  resDiv.innerHTML = '';
  
  if(!artists || artists.length === 0){
    resDiv.innerHTML = "<p>Aucun artiste trouv√©.</p>";
    return;
  }

  artists.forEach(artist => {
    const photo = artist.profile_path 
      ? `https://image.tmdb.org/t/p/w300${artist.profile_path}`
      : 'https://via.placeholder.com/200x300?text=Pas+d%27image';

    const div = document.createElement('div');
    div.classList.add('movie'); // tu peux garder la m√™me classe CSS
    div.innerHTML = `
      <img src="${photo}" alt="${artist.name}">
      <h3>${artist.name}</h3>
      <p>Connu pour :</p>
      <ul>
        ${artist.known_for.map(f => `<li>${f.title || f.name}</li>`).join('')}
      </ul>
    `;
    resDiv.appendChild(div);
  });
}


// Recherche par nom
async function searchMovies(query){
  const resDiv = document.getElementById('results');
  resDiv.innerHTML = "<p>Chargement...</p>";
  try{
    const res = await fetch(`https://api.themoviedb.org/3/search/movie?api_key=${apiKey}&language=fr-FR&query=${encodeURIComponent(query)}`);
    const data = await res.json();
    displayResults(data.results);
  }catch(e){
    resDiv.innerHTML="<p>Erreur lors de la recherche.</p>";
    console.error(e);
  }
}
// Artistes populaires
async function getArtistes(){
  const resDiv = document.getElementById('results');
  resDiv.innerHTML = "<p>Chargement...</p>";
  try{
    const res = await fetch(`https://api.themoviedb.org/3/person/popular?api_key=${apiKey}&language=fr-FR&page=1`);
    const data = await res.json();
    displayArtists(data.results); // <-- ici on utilise displayArtists
  }catch(e){
    resDiv.innerHTML="<p>Erreur lors du chargement.</p>";
    console.error(e);
  }
}


// Films populaires
async function getPopular(){
  const resDiv = document.getElementById('results');
  resDiv.innerHTML = "<p>Chargement...</p>";
  try{
    const res = await fetch(`https://api.themoviedb.org/3/movie/popular?api_key=${apiKey}&language=fr-FR&page=1`);
    const data = await res.json();
    displayResults(data.results);
  }catch(e){
    resDiv.innerHTML="<p>Erreur lors du chargement.</p>";
    console.error(e);
  }
}

// Par genre
async function getByGenre(genreId){
  const resDiv = document.getElementById('results');
  resDiv.innerHTML = "<p>Chargement...</p>";
  try{
    const res = await fetch(`https://api.themoviedb.org/3/discover/movie?api_key=${apiKey}&language=fr-FR&with_genres=${genreId}&sort_by=popularity.desc`);
    const data = await res.json();
    displayResults(data.results);
  }catch(e){
    resDiv.innerHTML="<p>Erreur lors du chargement.</p>";
    console.error(e);
  }
}

// Affichage des films
function displayResults(movies){
  const resDiv = document.getElementById('results');
  resDiv.innerHTML = '';
  if(!movies || movies.length===0){
    resDiv.innerHTML="<p>Aucun film trouv√©.</p>";
    return;
  }
  movies.forEach(movie => {
    const poster = movie.poster_path ? `https://image.tmdb.org/t/p/w500${movie.poster_path}` : 'https://via.placeholder.com/220x330?text=Pas+d%27image';
    const div = document.createElement('div');
    div.classList.add('movie');
    div.innerHTML=`
      <img src="${poster}" alt="${movie.title}">
      <h3>${movie.title}</h3>
      <p>Date : ${movie.release_date || 'Inconnue'}</p>
      <p>Note : ${movie.vote_average || 'N/A'}</p>
      <p class="overview">${movie.overview || 'Pas de description disponible.'}</p>
    `;
    resDiv.appendChild(div);
  });
}
</script>

</body>
</html>